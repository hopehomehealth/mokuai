<?php/** * Class express_model */class express_model extends Lowxp_Model{    private $baseTable = '###_express';    function __construct(){}    //保存数据    function save(){        $post = $_POST['post'];        $id = isset($_POST['id']) ? intval($_POST['id']) : 0;        #表单处理        if(empty($post['name'])){ return array('code'=>10001, 'message'=>'请输入物流公司名称!'); }        if(empty($post['pinyin'])){ return array('code'=>10001, 'message'=>'请输入物流公司标识!'); }        #重复处理        $where = $id ? ' and id!='.$id : '';        $res = $this->db->select("select * from ".$this->baseTable." where name='".$post['name']."'".$where);        if($res){ return array('code'=>10003, 'message'=>'快递公司名称已经存在，请更换!'); }        $res = $this->db->select("select * from ".$this->baseTable." where pinyin='".$post['pinyin']."'".$where);        if($res){ return array('code'=>10003, 'message'=>'快递标识已经存在，请更换!'); }        #保存        $where = $id ? array('id'=>$id) : '';        $res = $this->db->save($this->baseTable,$post,'',$where);        if(empty($res)){ return array('code'=>10002, 'message'=>'数据操作失败!'); } //未知错误        if($post['id']){            admin_log('编辑快递公司：'.$post['name']);            return array('code'=>0, 'type'=>'update', 'message'=>'更新成功');        }        else{            admin_log('添加快递公司：'.$post['name']);            return array('code'=>0, 'type'=>'insert', 'message'=>'添加成功');        }    }}
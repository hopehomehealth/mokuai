<?php/** * ZZCMS goodscat_model * ============================================================================ * * 版权所有 2014-2016 厦门紫竹数码科技有限公司，并保留所有权利。 * 网站地址: http://www.lnest.com； * ---------------------------------------------------------------------------- * 这不是一个自由软件！您只能在不用于商业目的的前提下对程序代码进行修改和 * 使用；不允许对程序代码以任何形式任何目的的再发布。 */class crowd_order_model extends Lowxp_Model{    function __construct(){}    function order_info($id,$where=""){        $where = !empty($where) ? $where : "order_id = $id";        $row = $this->db->get("SELECT * FROM ###_crowd_order WHERE $where");        return $row;    }   function save_order($data,$where=""){       if(empty($where)) $data['order_sn'] = $this->snOrder();       return $this->db->save("###_crowd_order",$data,"",$where);   }    //生成订单号    function snOrder() {        $order_sn = date('Ymd').substr( implode(NULL,array_map('ord',str_split(substr(uniqid(),7,13),1))) , -8 , 8);        return $order_sn;    }    function del($id){        $row = $this->db->get("SELECT * FROM ###_crowd_order WHERE order_id=".$id);        if(isset($row['order_id'])){            admin_log('删除订单：'.$row['order_sn']);            $result = $this->db->delete('###_crowd_order',array('order_id'=>$id));        }        return $result;    }}
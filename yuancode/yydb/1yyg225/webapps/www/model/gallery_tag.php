<?php/** * Class gallery_tag_model */class gallery_tag_model extends Lowxp_Model{    private $baseTable = '###_gallery_tag';    function __construct(){}    //保存数据    function save(){        $post = $_POST['post'];        $id = isset($_POST['id']) ? intval($_POST['id']) : 0;        #表单处理        if(empty($post['name'])){ return array('code'=>10001, 'message'=>'请输入多媒体分类名称!'); }        #重复处理        $where = $id ? " and id!=".$id." AND `type`='".$post['type']."'" : '';        $res = $this->db->select("select * from ".$this->baseTable." where name='".$post['name']."'".$where);        if($res){ return array('code'=>10003, 'message'=>'多媒体分类名称已经存在，请更换!'); }        #保存        $where = $id ? array('id'=>$id) : '';        $res = $this->db->save($this->baseTable,$post,'',$where);        if(empty($res)){ return array('code'=>10002, 'message'=>'数据操作失败!'); } //未知错误        if($id){            admin_log('编辑多媒体分类名称：'.$post['name']);            return array('code'=>0, 'type'=>'update', 'message'=>'更新成功');        }        else{            admin_log('添加多媒体分类名称：'.$post['name']);            return array('code'=>0, 'type'=>'insert', 'message'=>'添加成功');        }    }}